package com.example.service;import java.io.IOException;import android.content.Context;import android.content.Intent;import android.os.Bundle;import android.text.TextUtils;public class ClientSocketIOWriteNet extends Thread{	private Context context;	private boolean isMainInit = true;		public ClientSocketIOWriteNet(Context context) {		this.context = context;	}		/**	 * ·¢ËÍ	 * 	 * @param str	 */	public void SetStr(String str) {		try {			if (ClientNetService.bw != null) {				ClientNetService.bw.write(str);				ClientNetService.bw.flush();			} else {				NetListenerUtil.clostAllNet(context);			}		} catch (Exception e) {			  NetListenerUtil.clostAllNet(context);		}	}	public void getStr() {					while (isMainInit == true) {				try {					ClientNetService.socket.sendUrgentData(0xFF);				} catch (Exception e) {					NetListenerUtil.clostAllNet(context);					break;				}				if(!BroadcastFinal.isStart){				byte[] bytes;				try {					bytes = new byte[ClientNetService.br.available()];					ClientNetService.br.read(bytes);					String aa ="";					if(!TextUtils.isEmpty(new String(bytes).trim())){						 aa  = new String(bytes).trim();							Intent broadIntent = new Intent();							broadIntent.setAction(BroadcastFinal.BROAD_OPER_CONN);							Bundle bundle = new Bundle();							bundle.putString("json", aa);							broadIntent.putExtra("bundle", bundle);							context.sendBroadcast(broadIntent);					}				} catch (IOException e1) {				}				try {					Thread.sleep(250);				} catch (InterruptedException e) {									}								}			}			}	public void setInitBooleanMain(boolean bool) {		isMainInit = bool;	}}